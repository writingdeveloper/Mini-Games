<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Open World Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 100%;
      height: 100vh;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: #000;
    }

    #renderCanvas {
      width: 100%;
      height: 100%;
      touch-action: none;
      display: block;
    }

    #ui {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      font-size: 14px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      pointer-events: none;
    }

    #controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      text-align: center;
      font-size: 12px;
      background: rgba(0, 0, 0, 0.5);
      padding: 10px 20px;
      border-radius: 10px;
    }

    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 24px;
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    /* ë©”ì¸ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    #mainMenu {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .menu-container {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 20px;
      padding: 40px;
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .game-title {
      text-align: center;
      color: #fff;
      font-size: 48px;
      margin-bottom: 40px;
      text-shadow: 0 0 20px rgba(51, 153, 255, 0.5);
      font-weight: bold;
      letter-spacing: 4px;
    }

    .menu-section {
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .menu-section h2 {
      color: #3399ff;
      margin-bottom: 15px;
      font-size: 20px;
    }

    /* ìºë¦­í„° ì„ íƒ */
    .character-select {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
    }

    .character-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .character-option:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-5px);
    }

    .character-option.selected {
      border-color: #3399ff;
      background: rgba(51, 153, 255, 0.2);
    }

    .character-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .default-char {
      background: linear-gradient(135deg, #3399ff 0%, #0066cc 100%);
    }

    .warrior-char {
      background: linear-gradient(135deg, #ff5555 0%, #cc0000 100%);
    }

    .scout-char {
      background: linear-gradient(135deg, #55ff55 0%, #00cc00 100%);
    }

    .survivor-char {
      background: linear-gradient(135deg, #ffaa55 0%, #ff8800 100%);
    }

    .character-option span {
      color: #fff;
      font-size: 14px;
    }

    /* ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜ */
    .customization-options {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .custom-option {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .custom-option label {
      color: #fff;
      font-size: 14px;
      font-weight: bold;
    }

    .color-picker {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .color-option {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid transparent;
      transition: all 0.3s;
    }

    .color-option:hover {
      transform: scale(1.1);
    }

    .color-option.selected {
      border-color: #fff;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    }

    .size-picker, .body-type-picker {
      display: flex;
      gap: 10px;
    }

    .size-btn, .body-btn {
      flex: 1;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 2px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }

    .size-btn:hover, .body-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .size-btn.selected, .body-btn.selected {
      border-color: #3399ff;
      background: rgba(51, 153, 255, 0.3);
    }

    /* ë©”ë‰´ ë²„íŠ¼ë“¤ */
    .menu-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 30px;
    }

    .menu-btn {
      padding: 15px 30px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      transition: all 0.3s;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .menu-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .menu-btn.primary {
      background: linear-gradient(135deg, #3399ff 0%, #0066cc 100%);
      border-color: #3399ff;
      font-weight: bold;
      font-size: 20px;
    }

    .menu-btn.primary:hover {
      background: linear-gradient(135deg, #0066cc 0%, #003d99 100%);
      box-shadow: 0 5px 25px rgba(51, 153, 255, 0.5);
    }

    .credits {
      text-align: center;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 20px;
      font-size: 12px;
    }

    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: rgba(20, 20, 40, 0.95);
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.7);
      border: 2px solid rgba(51, 153, 255, 0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      border-bottom: 2px solid rgba(51, 153, 255, 0.3);
      padding-bottom: 15px;
    }

    .modal-header h2 {
      color: #3399ff;
      margin: 0;
      font-size: 28px;
    }

    .close-btn {
      background: none;
      border: none;
      color: #fff;
      font-size: 32px;
      cursor: pointer;
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(90deg);
    }

    .modal-body {
      color: #fff;
    }

    /* ì„¤ì • ìŠ¤íƒ€ì¼ */
    .setting-item {
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .setting-item label {
      display: block;
      margin-bottom: 10px;
      color: #3399ff;
      font-weight: bold;
      font-size: 14px;
    }

    .setting-item input[type="range"] {
      width: 70%;
      margin-right: 15px;
      vertical-align: middle;
    }

    .setting-item span {
      color: #fff;
      font-size: 14px;
      min-width: 50px;
      display: inline-block;
    }

    .setting-item select {
      width: 100%;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
    }

    .setting-item select option {
      background: #1a1a2e;
      color: #fff;
    }

    /* ì¡°ì‘ë²• ìŠ¤íƒ€ì¼ */
    .controls-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .control-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }

    .control-item:hover {
      background: rgba(51, 153, 255, 0.1);
      border-color: rgba(51, 153, 255, 0.3);
    }

    .key {
      background: linear-gradient(135deg, #3399ff 0%, #0066cc 100%);
      color: #fff;
      padding: 10px 15px;
      border-radius: 5px;
      font-weight: bold;
      min-width: 60px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(51, 153, 255, 0.3);
      font-size: 14px;
    }

    .description {
      color: #fff;
      flex: 1;
      font-size: 14px;
    }
  </style>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
  <script src="https://cdn.babylonjs.com/havok/HavokPhysics_umd.js"></script>
  <script type="module" src="/survival-game/game-modular.js"></script>
</head>
<body>
  <canvas id="renderCanvas"></canvas>

  <div id="loading">
    <div>ê²Œì„ ë¡œë”© ì¤‘...</div>
    <div style="font-size: 14px; margin-top: 10px;">ë¬¼ë¦¬ ì—”ì§„ ì´ˆê¸°í™”</div>
  </div>

  <div id="ui" class="hidden">
    <div>FPS: <span id="fps">0</span></div>
    <div>ìœ„ì¹˜: <span id="position">0, 0, 0</span></div>

    <!-- ì„œë°”ì´ë²Œ ìƒíƒœ ë°” -->
    <div style="margin-top: 15px;">
      <div style="margin-bottom: 8px;">
        <span style="color: #ff5555;">â¤ï¸ ì²´ë ¥: </span>
        <div style="display: inline-block; width: 150px; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid #fff; border-radius: 6px; vertical-align: middle;">
          <div id="health-bar" style="width: 100%; height: 100%; background: linear-gradient(90deg, #ff5555, #ff0000); border-radius: 5px;"></div>
        </div>
        <span id="health-text" style="margin-left: 8px;">100</span>
      </div>

      <div style="margin-bottom: 8px;">
        <span style="color: #55ff55;">âš¡ ìŠ¤íƒœë¯¸ë‚˜: </span>
        <div style="display: inline-block; width: 150px; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid #fff; border-radius: 6px; vertical-align: middle;">
          <div id="stamina-bar" style="width: 100%; height: 100%; background: linear-gradient(90deg, #55ff55, #00ff00); border-radius: 5px;"></div>
        </div>
        <span id="stamina-text" style="margin-left: 8px;">100</span>
      </div>

      <div style="margin-bottom: 8px;">
        <span style="color: #ffaa55;">ğŸ– ë°°ê³ í””: </span>
        <div style="display: inline-block; width: 150px; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid #fff; border-radius: 6px; vertical-align: middle;">
          <div id="hunger-bar" style="width: 100%; height: 100%; background: linear-gradient(90deg, #ffaa55, #ff8800); border-radius: 5px;"></div>
        </div>
        <span id="hunger-text" style="margin-left: 8px;">100</span>
      </div>

      <div style="margin-bottom: 8px;">
        <span style="color: #55aaff;">ğŸ’§ ê°ˆì¦: </span>
        <div style="display: inline-block; width: 150px; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid #fff; border-radius: 6px; vertical-align: middle;">
          <div id="thirst-bar" style="width: 100%; height: 100%; background: linear-gradient(90deg, #55aaff, #0088ff); border-radius: 5px;"></div>
        </div>
        <span id="thirst-text" style="margin-left: 8px;">100</span>
      </div>
    </div>

    <!-- ì‹œê°„ í‘œì‹œ -->
    <div style="margin-top: 15px;">
      <div>ğŸŒ ì‹œê°„: <span id="time">ë‚®</span></div>
    </div>
  </div>

  <!-- ë©”ì¸ ë©”ë‰´ í™”ë©´ -->
  <div id="mainMenu">
    <div class="menu-container">
      <h1 class="game-title">OPEN WORLD SURVIVAL</h1>

      <!-- ìºë¦­í„° ì„ íƒ ì„¹ì…˜ -->
      <div class="menu-section">
        <h2>ìºë¦­í„° ì„ íƒ</h2>
        <div class="character-select">
          <div class="character-option selected" data-character="default">
            <div class="character-preview default-char"></div>
            <span>ê¸°ë³¸ ìºë¦­í„°</span>
          </div>
          <div class="character-option" data-character="warrior">
            <div class="character-preview warrior-char"></div>
            <span>ì „ì‚¬</span>
          </div>
          <div class="character-option" data-character="scout">
            <div class="character-preview scout-char"></div>
            <span>ì •ì°°ë³‘</span>
          </div>
          <div class="character-option" data-character="survivor">
            <div class="character-preview survivor-char"></div>
            <span>ìƒì¡´ì</span>
          </div>
        </div>
      </div>

      <!-- ìºë¦­í„° ì»¤ìŠ¤í„°ë§ˆì´ì§• ì„¹ì…˜ -->
      <div class="menu-section">
        <h2>ìºë¦­í„° ì»¤ìŠ¤í„°ë§ˆì´ì§•</h2>

        <div class="customization-options">
          <div class="custom-option">
            <label>í”¼ë¶€ìƒ‰</label>
            <div class="color-picker">
              <div class="color-option" data-color="#3399ff" style="background: #3399ff;"></div>
              <div class="color-option" data-color="#ff5555" style="background: #ff5555;"></div>
              <div class="color-option" data-color="#55ff55" style="background: #55ff55;"></div>
              <div class="color-option" data-color="#ffaa55" style="background: #ffaa55;"></div>
              <div class="color-option selected" data-color="#9966ff" style="background: #9966ff;"></div>
              <div class="color-option" data-color="#ffff55" style="background: #ffff55;"></div>
            </div>
          </div>

          <div class="custom-option">
            <label>í¬ê¸°</label>
            <div class="size-picker">
              <button class="size-btn" data-size="0.8">ì‘ê²Œ</button>
              <button class="size-btn selected" data-size="1.0">ë³´í†µ</button>
              <button class="size-btn" data-size="1.3">í¬ê²Œ</button>
            </div>
          </div>

          <div class="custom-option">
            <label>ì²´í˜•</label>
            <div class="body-type-picker">
              <button class="body-btn" data-body="slim">ë‚ ì”¬</button>
              <button class="body-btn selected" data-body="normal">ë³´í†µ</button>
              <button class="body-btn" data-body="muscular">ê·¼ìœ¡ì§ˆ</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ë©”ë‰´ ë²„íŠ¼ë“¤ -->
      <div class="menu-buttons">
        <button id="startGameBtn" class="menu-btn primary">ê²Œì„ ì‹œì‘</button>
        <button id="settingsBtn" class="menu-btn">ì„¤ì •</button>
        <button id="controlsBtn" class="menu-btn">ì¡°ì‘ë²•</button>
      </div>

      <div class="credits">
        v1.0 | Made with Babylon.js
      </div>
    </div>
  </div>

  <!-- ì„¤ì • ëª¨ë‹¬ -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ì„¤ì •</h2>
        <button class="close-btn" id="closeSettings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-item">
          <label>ë§ˆìŠ¤í„° ë³¼ë¥¨</label>
          <input type="range" id="masterVolume" min="0" max="100" value="70">
          <span id="masterVolumeValue">70%</span>
        </div>
        <div class="setting-item">
          <label>ìŒì•… ë³¼ë¥¨</label>
          <input type="range" id="musicVolume" min="0" max="100" value="50">
          <span id="musicVolumeValue">50%</span>
        </div>
        <div class="setting-item">
          <label>íš¨ê³¼ìŒ ë³¼ë¥¨</label>
          <input type="range" id="sfxVolume" min="0" max="100" value="80">
          <span id="sfxVolumeValue">80%</span>
        </div>
        <div class="setting-item">
          <label>ê·¸ë˜í”½ í’ˆì§ˆ</label>
          <select id="graphicsQuality">
            <option value="low">ë‚®ìŒ</option>
            <option value="medium" selected>ë³´í†µ</option>
            <option value="high">ë†’ìŒ</option>
            <option value="ultra">ìµœê³ </option>
          </select>
        </div>
        <div class="setting-item">
          <label>ê·¸ë¦¼ì í’ˆì§ˆ</label>
          <select id="shadowQuality">
            <option value="off">ë„ê¸°</option>
            <option value="low">ë‚®ìŒ</option>
            <option value="medium" selected>ë³´í†µ</option>
            <option value="high">ë†’ìŒ</option>
          </select>
        </div>
        <div class="setting-item">
          <label>ë§ˆìš°ìŠ¤ ê°ë„</label>
          <input type="range" id="mouseSensitivity" min="1" max="10" value="5">
          <span id="mouseSensitivityValue">5</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ì¡°ì‘ë²• ëª¨ë‹¬ -->
  <div id="controlsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ì¡°ì‘ë²•</h2>
        <button class="close-btn" id="closeControls">&times;</button>
      </div>
      <div class="modal-body">
        <div class="controls-grid">
          <div class="control-item">
            <div class="key">W</div>
            <div class="description">ì•ìœ¼ë¡œ ì´ë™</div>
          </div>
          <div class="control-item">
            <div class="key">S</div>
            <div class="description">ë’¤ë¡œ ì´ë™</div>
          </div>
          <div class="control-item">
            <div class="key">A</div>
            <div class="description">ì™¼ìª½ìœ¼ë¡œ ì´ë™</div>
          </div>
          <div class="control-item">
            <div class="key">D</div>
            <div class="description">ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™</div>
          </div>
          <div class="control-item">
            <div class="key">Space</div>
            <div class="description">ì í”„</div>
          </div>
          <div class="control-item">
            <div class="key">E</div>
            <div class="description">íƒˆê²ƒ íƒ‘ìŠ¹/í•˜ì°¨</div>
          </div>
          <div class="control-item">
            <div class="key">ë§ˆìš°ìŠ¤</div>
            <div class="description">ì‹œì  íšŒì „ (í´ë¦­ í›„)</div>
          </div>
          <div class="control-item">
            <div class="key">F</div>
            <div class="description">ì „ì²´í™”ë©´ ì „í™˜</div>
          </div>
          <div class="control-item">
            <div class="key">ESC</div>
            <div class="description">ë§ˆìš°ìŠ¤ ì ê¸ˆ í•´ì œ</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
